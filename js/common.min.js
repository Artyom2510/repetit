$(function(){var r={};function e(e,t){e.switchPopup({btnClass:t,displayClass:"popup_display",visibleClass:"popup_visible",duration:300,overflow:!0}),e.on("beforeOpen",function(){$(".root").addClass("fixed")}),e.on("beforeClose",function(){$(".root").removeClass("fixed")})}$("img.img-svg").each(function(){var t,o=$(this),s=o.attr("id"),n=o.attr("class"),a=o.attr("src");void 0!==r[a]?(t=$(r[a]),void 0!==n&&(t=t.attr("class",n+" replaced-svg")),o.replaceWith(t)):$.ajax({url:a,async:!1,dataType:"xml",success:function(e){t=$(e).find("svg"),void 0!==s&&(t=t.attr("id",s)),!(t=t.removeAttr("xmlns:a")).attr("viewBox")&&t.attr("height")&&t.attr("width")&&t.attr("viewBox","0 0 "+t.attr("height")+" "+t.attr("width")),r[a]=t[0].outerHTML,void 0!==n&&(t=t.attr("class",n+" replaced-svg")),o.replaceWith(t)}})}),$("body").on("DOMNodeInserted",function(){});var a,i,l="",c=$(".js-popup-send-signal");function t(){c.removeClass("popup_with-arrow")}e(c,"js-tgl-signal"),c.on("beforeClose",function(){t()}),c.on("beforeOpen",function(e,t,o){$.pjax.reload("#form-wrapper",{push:!1,replace:!1,url:"/site/form/"})}),$(document).on("pjax:success",function(e,t,o,s,n){"#ajax-form"===n.container?setTimeout(function(){c.switchPopup("close")},3e3):"#form-wrapper"===n.container&&($('input[type="tel"]').inputmask("+7 999 999 99 99"),$(".js-vacancy-input").val(l),l="",a=$(".js-formfield"),i=$(".js-field"),a.on({mouseenter:function(){$(this).addClass("formfield_green")},mouseleave:function(){$(this).children(i).is(":focus")||$(this).removeClass("formfield_green")},input:function(){$(this).removeClass("formfield_error").children(".formfield__error").text(""),a.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled")}}),i.on({focus:function(){$(this).parent().addClass("formfield_green")},blur:function(){$(this).parent().removeClass("formfield_green")}}))});var o,s,n,d,u=["docx","doc","pdf"],p=0;function f(e){$(".js-error-upload").text(e)}function v(){$(".js-error-upload").text("")}$(document).on("change",".js-upload",function(){if(s=!1,d=$(this)[0].files[0]){n=d.name,p=d.size,o=n.toLowerCase().split(".").pop();for(var e=0;e<u.length;){if(u[e]===o){s=!s;break}e++}s?3145728<p||!p?(f("Файл более 3 Мб или пустой"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")):v():(f("Выберите файл с расширением doc, pdf"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")),a.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled"),$(".js-doc").addClass("doc_display").children(".doc__name").text(n)}}),$(document).on("click",".js-doc .doc__del",function(){$(this).siblings(".doc__name").text(""),$(".js-upload").val(null),v(),p=0,$(".js-doc").removeClass("doc_display")});var h,m=$(".js-popup-vacancy");e(m,"js-tgl-vacancy");var b,g,j=$(".js-content-wraper");function _(){$(".js-btn-glitch").addClass("btn_hovered");var t=document.querySelector(".svg-sprite").querySelector("#filter feTurbulence"),o={val:1e-6},s={val:1e-6};btnGlitch=new function(){var e=new TimelineMax({repeat:-1,repeatDelay:2,paused:!0,onUpdate:function(){t.setAttribute("baseFrequency",o.val+" "+s.val)}});return e.to(s,.1,{val:.5}).to(o,.1,{val:.02}),e.set(s,{val:1e-6}).set(o,{val:1e-6}),e.to(s,.2,{val:.4},.4).to(o,.2,{val:.002},.4),e.set(s,{val:1e-6}).set(o,{val:1e-6}),{start:function(){e.play(0)},stop:function(){e.pause()}}},btnGlitch.start(),$(".js-btn-glitch").on({mouseenter:function(){$(this).removeClass("btn_hovered"),btnGlitch.stop()},mouseleave:function(){$(this).addClass("btn_hovered"),btnGlitch.start()}})}$(".js-query").on("click",function(){h=$(this).data("query"),$.ajax({url:h,method:"POST",async:!1,contentType:!1,processData:!1,success:function(e){e.success?(j.html(e.data),m.switchPopup("open")):console.log(e.errors)}})}),$(".js-go-to-form").on("click",function(){l=m.find(".popup__title").text(),m.switchPopup("close"),c.addClass("popup_with-arrow").switchPopup("open")}),$(document).on("click",".js-return-vacancy",function(){t(),c.switchPopup("close"),m.switchPopup("open")}),navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")?(b=navigator.userAgent,console.log(b),(!(g=b.match(/OS (\d?[0-9])/))||12<g[1])&&_()):_()});