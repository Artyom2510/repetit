$(function(){var n={};function e(e,t){e.switchPopup({btnClass:t,displayClass:"popup_display",visibleClass:"popup_visible",duration:300,overflow:!0}),e.on("beforeOpen",function(){$(".root").addClass("fixed")}),e.on("beforeClose",function(){$(".root").removeClass("fixed")})}$("img.img-svg").each(function(){var t,s=$(this),a=s.attr("id"),o=s.attr("class"),r=s.attr("src");void 0!==n[r]?(t=$(n[r]),void 0!==o&&(t=t.attr("class",o+" replaced-svg")),s.replaceWith(t)):$.ajax({url:r,async:!1,dataType:"xml",success:function(e){t=$(e).find("svg"),void 0!==a&&(t=t.attr("id",a)),!(t=t.removeAttr("xmlns:a")).attr("viewBox")&&t.attr("height")&&t.attr("width")&&t.attr("viewBox","0 0 "+t.attr("height")+" "+t.attr("width")),n[r]=t[0].outerHTML,void 0!==o&&(t=t.attr("class",o+" replaced-svg")),s.replaceWith(t)}})});var r,i,l="",d=$(".js-popup-send-signal");e(d,"js-tgl-signal"),d.on("beforeClose",function(){t()}),d.on("beforeOpen",function(e,t,s){$.pjax.reload("#form-wrapper",{push:!1,replace:!1,url:"/site/form/"})});function t(){d.removeClass("popup_with-arrow")}$(document).on("pjax:success",function(e,t,s,a,o){"#ajax-form"===o.container&&-1===t.indexOf("js-form")?(dataLayer.push({event:"hr-page-lead"}),setTimeout(function(){d.switchPopup("close")},3e3)):"#form-wrapper"===o.container&&($(".js-vacancy-input").val(l),l="",$(".js-mask").on("input",function(){!function(e){var t=e.val(),s=t.length;if(s)if(t[0].match(/[0-9]|\+/)){if(1<s){13<s&&(t=t.substr(0,13));for(var a=t.substr(1),o=t[0],r=0;r<a.length;r++)a[r].match(/[0-9]/)&&(o+=a[r]);e.val(o)}}else e.val(t.substr(1))}($(this))}),r=$(".js-formfield"),i=$(".js-field"),r.on({mouseenter:function(){$(this).addClass("formfield_green")},mouseleave:function(){$(this).children(i).is(":focus")||$(this).removeClass("formfield_green")},input:function(){$(this).removeClass("formfield_error").children(".formfield__error").text(""),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled")}}),i.on({focus:function(){$(this).parent().addClass("formfield_green")},blur:function(){$(this).parent().removeClass("formfield_green")}}))});var s,a,o,c,u=["docx","doc","pdf"],p=0;function f(e){$(".js-error-upload").text(e)}function v(){$(".js-error-upload").text("")}$(document).on("change",".js-upload",function(){if(a=!1,c=$(this)[0].files[0]){o=c.name,p=c.size,s=o.toLowerCase().split(".").pop();for(var e=0;e<u.length;){if(u[e]===s){a=!a;break}e++}a?3145728<p||!p?(f("Файл более 3 Мб или пустой"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")):v():(f("Выберите файл с расширением doc, pdf"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled"),$(".js-doc").addClass("doc_display").children(".doc__name").text(o)}}),$(document).on("click",".js-doc .doc__del",function(){$(this).siblings(".doc__name").text(""),$(".js-upload").val(null),v(),p=0,$(".js-doc").removeClass("doc_display"),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled")});var h,m=$(".js-popup-vacancy");e(m,"js-tgl-vacancy");var b,g=$(".js-content-wraper"),_=0;function j(){$(".js-btn-glitch").addClass("btn_hovered");var t=document.querySelector(".svg-sprite").querySelector("#filter feTurbulence"),s={val:1e-6},a={val:1e-6};btnGlitch=new function(){var e=new TimelineMax({repeat:-1,repeatDelay:2,paused:!0,onUpdate:function(){t.setAttribute("baseFrequency",s.val+" "+a.val)}});return e.to(a,.1,{val:.5}).to(s,.1,{val:.02}),e.set(a,{val:1e-6}).set(s,{val:1e-6}),e.to(a,.2,{val:.4},.4).to(s,.2,{val:.002},.4),e.set(a,{val:1e-6}).set(s,{val:1e-6}),{start:function(){e.play(0)},stop:function(){e.pause()}}},btnGlitch.start(),$(".js-btn-glitch").on({mouseenter:function(){$(this).removeClass("btn_hovered"),btnGlitch.stop()},mouseleave:function(){$(this).addClass("btn_hovered"),btnGlitch.start()}})}$(".js-query").on("click",function(){h=$(this).data("query"),$(this).parent().hasClass("js-bounding")&&($(".main-cards__easter-egg").removeClass("main-cards__easter-egg_see"),$(".js-easter-egg-3").css("pointer-events","all")),$(this).hasClass("card_broken")?(0<_?($(this).siblings(".item__prev").find("path:nth-child(4)").addClass("broken"),$(this).removeClass("card_broken")):$(this).siblings(".item__prev").find("path:nth-child(2)").addClass("broken"),_++):$.ajax({url:h,method:"POST",async:!1,contentType:!1,processData:!1,success:function(e){e.success?(g.html(e.data),m.switchPopup("open")):console.log(e.errors)}})}),$(".js-go-to-form").on("click",function(){l=m.find(".popup__title").text(),m.switchPopup("close"),d.addClass("popup_with-arrow").switchPopup("open")}),$(document).on("click",".js-return-vacancy",function(){t(),d.switchPopup("close"),m.switchPopup("open")}),navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")?(!(b=navigator.userAgent.match(/OS (\d?[0-9])/))||12<b[1])&&j():j()});