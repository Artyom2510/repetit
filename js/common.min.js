$(function(){var n={};function e(e,t){e.switchPopup({btnClass:t,displayClass:"popup_display",visibleClass:"popup_visible",duration:300,overflow:!0}),e.on("beforeOpen",function(){$(".root").addClass("fixed")}),e.on("beforeClose",function(){$(".root").removeClass("fixed")})}$("img.img-svg").each(function(){var t,s=$(this),o=s.attr("id"),a=s.attr("class"),r=s.attr("src");void 0!==n[r]?(t=$(n[r]),void 0!==a&&(t=t.attr("class",a+" replaced-svg")),s.replaceWith(t)):$.ajax({url:r,async:!1,dataType:"xml",success:function(e){t=$(e).find("svg"),void 0!==o&&(t=t.attr("id",o)),!(t=t.removeAttr("xmlns:a")).attr("viewBox")&&t.attr("height")&&t.attr("width")&&t.attr("viewBox","0 0 "+t.attr("height")+" "+t.attr("width")),n[r]=t[0].outerHTML,void 0!==a&&(t=t.attr("class",a+" replaced-svg")),s.replaceWith(t)}})}),$("body").on("DOMNodeInserted",function(){});var r,i,l=$(".js-popup-send-signal");e(l,"js-tgl-signal"),l.on("beforeClose",function(){t()}),l.on("beforeOpen",function(e,t,s){$.pjax.reload("#form-wrapper",{push:!1,replace:!1,url:"/site/form/"})});function t(){l.removeClass("popup_with-arrow")}$(document).on("pjax:success",function(e,t,s,o,a){"#ajax-form"===a.container&&-1===t.indexOf("js-form")?(dataLayer.push({event:"hr-page-lead"}),setTimeout(function(){l.switchPopup("close")},3e3)):"#form-wrapper"===a.container&&($(".js-mask").on("input",function(){!function(e){var t=e.val(),s=t.length;if(s)if(t[0].match(/[0-9]|\+/)){if(1<s){13<s&&(t=t.substr(0,13));for(var o=t.substr(1),a=t[0],r=0;r<o.length;r++)o[r].match(/[0-9]/)&&(a+=o[r]);e.val(a)}}else e.val(t.substr(1))}($(this))}),r=$(".js-formfield"),i=$(".js-field"),r.on({mouseenter:function(){$(this).addClass("formfield_green")},mouseleave:function(){$(this).children(i).is(":focus")||$(this).removeClass("formfield_green")},input:function(){$(this).removeClass("formfield_error").children(".formfield__error").text(""),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled")}}),i.on({focus:function(){$(this).parent().addClass("formfield_green")},blur:function(){$(this).parent().removeClass("formfield_green")}}))});var s,o,a,c,d=["docx","doc","pdf"],u=0;function f(e){$(".js-error-upload").text(e)}function p(){$(".js-error-upload").text("")}$(document).on("change",".js-upload",function(){if(o=!1,c=$(this)[0].files[0]){a=c.name,u=c.size,s=a.toLowerCase().split(".").pop();for(var e=0;e<d.length;){if(d[e]===s){o=!o;break}e++}o?3145728<u||!u?(f("Файл более 3 Мб или пустой"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")):p():(f("Выберите файл с расширением doc, pdf"),$(".js-submit").attr("disabled","true").addClass("btn_disabled")),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled"),$(".js-doc").addClass("doc_display").children(".doc__name").text(a)}}),$(document).on("click",".js-doc .doc__del",function(){$(this).siblings(".doc__name").text(""),$(".js-upload").val(null),p(),u=0,$(".js-doc").removeClass("doc_display"),r.hasClass("formfield_error")||$(".js-error-upload").text().length||$(".js-submit").removeAttr("disabled").removeClass("btn_disabled")});var v,h=$(".js-popup-vacancy");e(h,"js-tgl-vacancy");var m,b=$(".js-content-wraper");function g(){$(".js-btn-glitch").addClass("btn_hovered");var t=document.querySelector(".svg-sprite").querySelector("#filter feTurbulence"),s={val:1e-6},o={val:1e-6};btnGlitch=new function(){var e=new TimelineMax({repeat:-1,repeatDelay:2,paused:!0,onUpdate:function(){t.setAttribute("baseFrequency",s.val+" "+o.val)}});return e.to(o,.1,{val:.5}).to(s,.1,{val:.02}),e.set(o,{val:1e-6}).set(s,{val:1e-6}),e.to(o,.2,{val:.4},.4).to(s,.2,{val:.002},.4),e.set(o,{val:1e-6}).set(s,{val:1e-6}),{start:function(){e.play(0)},stop:function(){e.pause()}}},btnGlitch.start(),$(".js-btn-glitch").on({mouseenter:function(){$(this).removeClass("btn_hovered"),btnGlitch.stop()},mouseleave:function(){$(this).addClass("btn_hovered"),btnGlitch.start()}})}$(".js-query").on("click",function(){v=$(this).data("query"),$.ajax({url:v,method:"POST",async:!1,contentType:!1,processData:!1,success:function(e){e.success?(b.html(e.data),h.switchPopup("open")):console.log(e.errors)}})}),$(".js-go-to-form").on("click",function(){h.switchPopup("close"),l.addClass("popup_with-arrow").switchPopup("open")}),$(document).on("click",".js-return-vacancy",function(){t(),l.switchPopup("close"),h.switchPopup("open")}),navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS")?(!(m=navigator.userAgent.match(/OS (\d?[0-9])/))||12<m[1])&&g():g()});